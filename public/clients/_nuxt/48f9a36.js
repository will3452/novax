(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1139:function(t,e,n){"use strict";n.r(e);n(41);var o=n(17),r=(n(104),n(59),{fetch:function(){this.loadComments()},props:["type","id"],data:function(){return{viewComments:!1,payload:{},comments:[],submitLoading:!1}},methods:{submitComment:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.submitLoading=!0,t.payload.commentable_type=t.type,t.payload.commentable_id=t.id,e.next=6,t.$axios.post("/api/comments",t.payload);case 6:t.$notification.success({message:"success",description:"Comment has been submitted"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.prev=12,t.payload={},t.$fetch(),t.submitLoading=!1,t.viewComments=!0,e.finish(12);case 18:case"end":return e.stop()}}),e,null,[[0,9,12,18]])})))()},loadComments:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/comments?type=".concat(t.type,"&id=").concat(t.id));case 3:n=e.sent,data=n.data,t.comments=data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error to load comments ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}}),m=n(34),component=Object(m.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("a-divider"),t._v(" "),e("a-row",{attrs:{type:"flex"}},[e("h4",[t._v("Comments ")]),t._v(" "),e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){t.viewComments=!t.viewComments}}},[t._v(t._s(t.viewComments?"hide":"show"))])],1),t._v(" "),t.viewComments?e("div",[t._l(t.comments,(function(n){return e("a-comment",{key:n.id},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n            "+t._s(n.content)+"\n        ")]),t._v(" "),e("a-avatar",{staticStyle:{color:"#f56a00",backgroundColor:"#fde3cf"},attrs:{slot:"avatar",size:"small"},slot:"avatar"},[t._v("\n            "+t._s(n.user.name[0].toUpperCase())+"\n        ")]),t._v(" "),e("span",{attrs:{slot:"author"},slot:"author"},[t._v("\n            "+t._s(n.user.name)+"\n        ")]),t._v(" "),e("span",{attrs:{slot:"datetime"},slot:"datetime"},[t._v("\n            "+t._s(t.$moment(n.created_at).fromNow())+"\n        ")])],1)})),t._v(" "),t.comments.length?t._e():e("a-empty")],2):t._e(),t._v(" "),e("div",[e("a-form-model",{attrs:{model:t.payload}},[e("a-form-model-item",{attrs:{label:"Leave a comment"}},[e("a-row",{attrs:{type:"flex",gutter:[16,16]}},[e("a-col",{attrs:{span:20}},[e("a-textarea",{model:{value:t.payload.content,callback:function(e){t.$set(t.payload,"content",e)},expression:"payload.content"}})],1),t._v(" "),e("a-col",{attrs:{span:4}},[e("a-button",{attrs:{loading:t.submitLoading,type:"primary",size:"small"},on:{click:t.submitComment}},[t._v("Submit comment")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);