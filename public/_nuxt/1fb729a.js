(window.webpackJsonp=window.webpackJsonp||[]).push([[8,2,3],{1139:function(t,e,o){"use strict";o.r(e);o(41);var n=o(17),r=(o(104),o(59),{fetch:function(){this.loadComments()},props:["type","id"],data:function(){return{viewComments:!1,payload:{},comments:[],submitLoading:!1}},methods:{submitComment:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.submitLoading=!0,t.payload.commentable_type=t.type,t.payload.commentable_id=t.id,e.next=6,t.$axios.post("/api/comments",t.payload);case 6:t.$notification.success({message:"success",description:"Comment has been submitted"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.prev=12,t.payload={},t.$fetch(),t.submitLoading=!1,t.viewComments=!0,e.finish(12);case 18:case"end":return e.stop()}}),e,null,[[0,9,12,18]])})))()},loadComments:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/comments?type=".concat(t.type,"&id=").concat(t.id));case 3:o=e.sent,data=o.data,t.comments=data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error to load comments ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}}),l=o(34),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("a-divider"),t._v(" "),e("a-row",{attrs:{type:"flex"}},[e("h4",[t._v("Comments ")]),t._v(" "),e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){t.viewComments=!t.viewComments}}},[t._v(t._s(t.viewComments?"hide":"show"))])],1),t._v(" "),t.viewComments?e("div",[t._l(t.comments,(function(o){return e("a-comment",{key:o.id},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n            "+t._s(o.content)+"\n        ")]),t._v(" "),e("a-avatar",{staticStyle:{color:"#f56a00",backgroundColor:"#fde3cf"},attrs:{slot:"avatar",size:"small"},slot:"avatar"},[t._v("\n            "+t._s(o.user.name[0].toUpperCase())+"\n        ")]),t._v(" "),e("span",{attrs:{slot:"author"},slot:"author"},[t._v("\n            "+t._s(o.user.name)+"\n        ")]),t._v(" "),e("span",{attrs:{slot:"datetime"},slot:"datetime"},[t._v("\n            "+t._s(t.$moment(o.created_at).fromNow())+"\n        ")])],1)})),t._v(" "),t.comments.length?t._e():e("a-empty")],2):t._e(),t._v(" "),e("div",[e("a-form-model",{attrs:{model:t.payload}},[e("a-form-model-item",{attrs:{label:"Leave a comment"}},[e("a-row",{attrs:{type:"flex",gutter:[16,16]}},[e("a-col",{attrs:{span:20}},[e("a-textarea",{model:{value:t.payload.content,callback:function(e){t.$set(t.payload,"content",e)},expression:"payload.content"}})],1),t._v(" "),e("a-col",{attrs:{span:4}},[e("a-button",{attrs:{loading:t.submitLoading,type:"primary",size:"small"},on:{click:t.submitComment}},[t._v("Submit comment")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},1141:function(t,e,o){"use strict";o.r(e);o(41);var n={props:["post"],data:function(){return{}}},r=o(34),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("a-card",{staticStyle:{"margin-bottom":"1em"}},[e("small",{attrs:{slot:"extra"},slot:"extra"},[t._v("\n        "+t._s(t.$moment(t.post.created_at).fromNow())+"\n    ")]),t._v(" "),e("div",{attrs:{slot:"title"},slot:"title"},[e("a-row",{attrs:{type:"flex",align:"middle",justify:"start",gutter:[16,16]}},[e("a-col",[e("a-avatar",{staticStyle:{color:"#f56a00",backgroundColor:"#fde3cf"},attrs:{size:"large"}},[t._v("\n                    "+t._s(t.post.user.name[0].toUpperCase())+"\n                ")])],1),t._v(" "),e("a-col",[e("div",[t._v("\n                    "+t._s(t.post.user.name)+"\n                ")]),t._v(" "),e("a-tag",{attrs:{color:"green"}},[t._v("\n                    "+t._s(t.post.category)+"\n                ")])],1)],1)],1),t._v(" "),e("h1",[t._v(t._s(t.post.title))]),t._v(" "),e("p",[t._v(t._s(t.post.content))]),t._v(" "),e("newsfeed-comments",{attrs:{type:"\\App\\Models\\Post",id:t.post.id}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{NewsfeedComments:o(1139).default})},1145:function(t,e,o){"use strict";o.r(e);var n=o(17),r=(o(59),{fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/posts");case 3:o=e.sent,data=o.data,t.posts=data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$notification.error({message:"Error",description:"Failed to load feed."});case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},methods:{submitNewPost:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/api/posts",t.payload);case 3:t.$notification.success({message:" Success",description:"Post created!"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.$notification.error(e.t0);case 9:return e.prev=9,t.payload={},t.$fetch(),e.finish(9);case 13:case"end":return e.stop()}}),e,null,[[0,6,9,13]])})))()}},data:function(){return{posts:[],loading:!0,createModal:!1,payload:{}}}}),l=o(34),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("a-card",{attrs:{loading:t.loading}},[e("a-modal",{attrs:{visible:t.createModal,"ok-text":"Submit now"},on:{ok:t.submitNewPost,cancel:function(e){t.createModal=!1}}},[e("a-form-model",{attrs:{model:t.payload,layout:"horizontal","wrapper-col":{span:19},"label-col":{span:4}}},[e("a-form-model-item",{attrs:{label:"Title"}},[e("a-input",{model:{value:t.payload.title,callback:function(e){t.$set(t.payload,"title",e)},expression:"payload.title"}})],1),t._v(" "),e("a-form-model-item",{attrs:{label:"Category"}},[e("a-input",{model:{value:t.payload.category,callback:function(e){t.$set(t.payload,"category",e)},expression:"payload.category"}})],1),t._v(" "),e("a-form-model-item",{attrs:{label:"Content"}},[e("a-textarea",{model:{value:t.payload.content,callback:function(e){t.$set(t.payload,"content",e)},expression:"payload.content"}})],1)],1)],1),t._v(" "),e("h1",{attrs:{slot:"title"},slot:"title"},[t._v("\n        NEWSFEED "),e("a-badge",{attrs:{count:t.posts.length}})],1),t._v(" "),e("div",{attrs:{slot:"extra"},slot:"extra"},[e("a-button",{attrs:{icon:"edit",type:"primary"},on:{click:function(e){t.createModal=!0}}},[t._v("\n            Write new\n        ")])],1),t._v(" "),t._l(t.posts,(function(t){return e("Newsfeed",{key:t.id,attrs:{post:t}})}))],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Newsfeed:o(1141).default})}}]);